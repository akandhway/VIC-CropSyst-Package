#ifndef coordinatesH
#define coordinatesH
#include "corn/container/item.h"
#include "geodesy/geocoordinate.h"
#include "geodesy/UTM.h"
#include "corn/container/bilist.h"
#include "corn/application/arguments.h"
namespace geodesy
{
//______________________________________________________________________________
// Need to implement an Extent that uses Coordinate::Item
//______________________________________________________________________________
class Coordinates
: public extends_ CORN::Bidirectional_list
{
 public:
   class Item
   : public implements_ CORN::Item
   {
    protected: // owned
      provided_ Geocoordinate     *geocoordinate;
      provided_ UTM_Coordinate    *UTM_coordinate;
    public:
      Item();
      Item(Geocoordinate     *geocoordinate_);
      Item(UTM_Coordinate    *UTM_coordinate_);
    public:
      Geocoordinate     &geo()                                       provision_;
      UTM_Coordinate    &UTM()                                       provision_;
      virtual bool is_in_northern_hemisphere()                     affirmation_;
   };
   //_Item__________________________________________________________2018-04-25_/
   struct Cell_dimension    // need name  Cell_topology?  Cell_dimensions?
   {
      float32       length_km; // currently assuming cell is square
      bool          centroid;
    public:
      inline Cell_dimension()
         : length_km(0)
         , centroid(true)
         {}
      inline Cell_dimension(const Cell_dimension &from_copy)
         : length_km(from_copy.length_km)
         , centroid (from_copy.centroid)
         {}
   };
   //_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
   class Arguments
   {
    protected:
      CORN::Data_record &data_rec;                                               //191014
    public:
      // Could be DBF or DAT or TXT currently expecting only one filename
      CORN::OS::File_name *geocoordinates_filename;
      std::string    ID_fieldname;                                               //171111
      // Extent         predefined_extent;                                       //170817
      Cell_dimension cell_dimension;
      nat8           precision_latitude;                                         //170829
      nat8           precision_longitude;                                        //170829
      std::string CS_geocoordinates_dir_raw;                                     //180318
      //191103 CORN::OS::Directory_name_concrete *CS_geocoordinates_dir;         //180318
         //191014 eventually this will be a Directory_name_cowl
      mutable CORN::Unidirectional_list specific_geocoordinates;                 //180318
      sint16 zone;                                                               //180816
      char   zone_designator;                                                    //180816
    private:
      std::string UTMzone;                                                       //191014
         // used only when setup args options
    public:
      Arguments
         (CORN::Data_record &data_rec_);                                         //191014
      virtual ~Arguments();
      virtual bool is_specified_geocoordinates()                   affirmation_; //190925
      virtual bool expect_structure(bool for_write);                             //191014
      virtual bool get_end();                                                    //161023
      virtual bool take(CORN::Item_string *arg)                  appropriation_; //200216
      /*191103 obsolete now using CORN::Arguments::discover_one
      virtual bool s_ubmit_DEN
         (CORN::OS::Directory_entry_name *param_DEN)                submission_; //180213
      virtual bool s_ubmit_DEN_unqualified                                        //180213
         (CORN::OS::Directory_entry_name *param_DEN_unqualified)    submission_;
      */
      /*191103 moved to get end
      virtual bool r_ecognize(const std::string &paramstring)      modification_;
      */
      /*191103 obsolete now use expect_structure
      virtual bool r_ecognize_assignment                                          //170816
         (const std::string &variable
         ,const std::string &value)                               modification_;
      */
      /*191103 Now using Arguments::discover_one
      bool geocoordinates_find(bool must_exist);
      bool geocoordinates_find_qualified_filename();
      bool geocoordinates_find_file_given_extension(const char *extension_raw);
      */
   };
   //_Arguments________________________________________________________________/
 public:
   inline Coordinates(const Arguments *arguments_=0)
      : CORN::Bidirectional_list(true) // must be unique
/*NYI
      , arguments(arguments_)
      , netCDF_grid_available(false)
      , extent(0)
      , geocoord_fields_dBase (0)
*/
      {}
   inline ~Coordinates()
      {
         //NYI         delete geocoord_fields_dBase;
      }
};
//_Coordinates______________________________________________________2018-04-15_/
}//_namespace geodesy__________________________________________________________/
#endif

